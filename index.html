<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Retro Arcade Collection</title>
  <style>
    /* Global Styles */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #222, #555); color: #fff; overflow: hidden; }
    a { text-decoration: none; color: inherit; }
    button { 
      cursor: pointer; 
      border: 2px solid #fff; 
      background: #ff4757; 
      color: #fff; 
      padding: 10px 20px; 
      font-size: 16px; 
      border-radius: 5px; 
      transition: background 0.3s; 
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
    }
    button:hover { background: #e84118; }
    
    /* Container Layout */
    #menu, .game-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    #menu { display: flex; flex-direction: column; align-items: center; justify-content: center; animation: fadeIn 1s; }
    .game-container { 
      display: none; 
      background: #000; 
      position: relative; /* Ensures back button is positioned relative to its container */
    }
    .back-btn { 
      position: absolute; 
      top: 20px; 
      left: 20px; 
      z-index: 10000; 
      /* Additional styling already defined above via button rules */
    }
    
    /* Menu Styling */
    .menu-title { font-size: 48px; margin-bottom: 40px; text-shadow: 2px 2px 5px #000; }
    .menu-item { 
      margin: 15px; 
      padding: 15px 30px; 
      background: rgba(255,255,255,0.1); 
      border-radius: 10px; 
      width: 300px; 
      text-align: center; 
      font-size: 24px; 
      transition: transform 0.3s, background 0.3s; 
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
    }
    .menu-item:hover { transform: scale(1.05); background: rgba(255,255,255,0.2); }
    
    /* Canvas Centering */
    canvas { display: block; margin: 40px auto; background: #000; border: 5px solid #fff; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    
    /* Animations */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    .fadeIn { animation: fadeIn 0.5s; }
  </style>
</head>
<body>
  <!-- Main Menu -->
  <div id="menu" class="fadeIn">
    <div class="menu-title">Retro Arcade Collection</div>
    <div class="menu-item" data-game="pacman">Pac-Man</div>
    <div class="menu-item" data-game="flappy">Flappy Bird</div>
    <div class="menu-item" data-game="donkeykong">Donkey Kong</div>
    <div class="menu-item" data-game="mario">Mario</div>
  </div>
  
  <!-- Pac-Man Container -->
  <div id="pacman-container" class="game-container">
    <button class="back-btn" data-back>Back</button>
    <canvas id="pacmanCanvas" width="560" height="620"></canvas>
  </div>
  
  <!-- Flappy Bird Container -->
  <div id="flappy-container" class="game-container">
    <button class="back-btn" data-back>Back</button>
    <canvas id="flappyCanvas" width="288" height="512"></canvas>
  </div>
  
  <!-- Donkey Kong Container -->
  <div id="donkeykong-container" class="game-container">
    <button class="back-btn" data-back>Back</button>
    <canvas id="dkCanvas" width="400" height="500"></canvas>
  </div>
  
  <!-- Mario Container -->
  <div id="mario-container" class="game-container">
    <button class="back-btn" data-back>Back</button>
    <canvas id="marioCanvas" width="640" height="480"></canvas>
  </div>
  
  <script>
    // Navigation Code
    const menu = document.getElementById("menu");
    const gameContainers = {
      pacman: document.getElementById("pacman-container"),
      flappy: document.getElementById("flappy-container"),
      donkeykong: document.getElementById("donkeykong-container"),
      mario: document.getElementById("mario-container")
    };
    document.querySelectorAll(".menu-item").forEach(item => {
      item.addEventListener("click", () => {
        const game = item.getAttribute("data-game");
        menu.style.display = "none";
        gameContainers[game].style.display = "block";
        gameContainers[game].classList.add("fadeIn");
        // Start the game if not already started
        if(game === "pacman" && !window.pacmanStarted) { startPacman(); window.pacmanStarted = true; }
        if(game === "flappy" && !window.flappyStarted) { startFlappy(); window.flappyStarted = true; }
        if(game === "donkeykong" && !window.dkStarted) { startDonkeyKong(); window.dkStarted = true; }
        if(game === "mario" && !window.marioStarted) { startMario(); window.marioStarted = true; }
      });
    });
    document.querySelectorAll("[data-back]").forEach(btn => {
      btn.addEventListener("click", () => {
        // Hide all game containers and show menu
        Object.values(gameContainers).forEach(container => container.style.display = "none");
        menu.style.display = "flex";
      });
    });
    
    /* ------------------------------ Pac-Man Game ------------------------------ */
    function startPacman() {
      (function(){
        // ... [Pac-Man game code unchanged] ...
      })();
    }
    
    /* ------------------------------ Flappy Bird Game ------------------------------ */
    function startFlappy() {
      (function(){
        // ... [Flappy Bird game code unchanged] ...
      })();
    }
    
    /* ------------------------------ Donkey Kong Game ------------------------------ */
    function startDonkeyKong() {
      (function(){
        // ... [Donkey Kong game code unchanged] ...
      })();
    }
    
    /* ------------------------------ Mario Game ------------------------------ */
    function startMario() {
      (function(){
        // ... [Mario game code unchanged except for text color fix] ...
      })();
    }
  </script>
</body>
</html>
